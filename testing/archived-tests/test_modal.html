<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Judge Assignment Modal</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Judge Assignment Modal Test</h1>

        <!-- Test button -->
        <button class="btn btn-primary btn-sm" id="assign-judge-btn">
            <i class="fas fa-plus"></i> Assign Judge
        </button>
    </div>

    <!-- Judge Assignment Modal -->
    <div class="modal fade" id="judgeAssignmentModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Assign Judge to Session</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="judgeAssignmentForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="assignJudgeSelect">Select Judge</label>
                                    <select class="form-control" id="assignJudgeSelect" name="judge_id" required>
                                        <option value="">Choose a judge...</option>
                                        <option value="1">Test Judge 1 (0 assignments)</option>
                                        <option value="2">Test Judge 2 (1 assignments)</option>
                                    </select>
                                    <small class="form-text text-muted">Select a judge to assign to the scoring session</small>
                                </div>

                                <div class="form-group">
                                    <label for="assignCompetitionSelect">Competition</label>
                                    <select class="form-control" id="assignCompetitionSelect" name="competition_id" required>
                                        <option value="">Select competition...</option>
                                        <option value="1">Test Competition 1</option>
                                        <option value="2">Test Competition 2</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="assignCategorySelect">Category</label>
                                    <select class="form-control" id="assignCategorySelect" name="category_id" required>
                                        <option value="">Select category...</option>
                                    </select>
                                    <small class="form-text text-muted">Categories will load based on selected competition</small>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="assignJudgeType">Judge Type</label>
                                    <select class="form-control" id="assignJudgeType" name="judge_type">
                                        <option value="primary">Primary Judge</option>
                                        <option value="secondary">Secondary Judge</option>
                                        <option value="backup">Backup Judge</option>
                                        <option value="head">Head Judge</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="assignTableNumber">Table Number (Optional)</label>
                                    <input type="text" class="form-control" id="assignTableNumber" name="table_number"
                                           placeholder="e.g., Table 1, A-1, etc.">
                                </div>

                                <div class="form-group">
                                    <label for="assignPhase">Competition Phase</label>
                                    <select class="form-control" id="assignPhase" name="phase">
                                        <option value="preliminary">Preliminary</option>
                                        <option value="semifinal">Semifinal</option>
                                        <option value="final">Final</option>
                                        <option value="all">All Phases</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="assignSpecialInstructions">Special Instructions (Optional)</label>
                                    <textarea class="form-control" id="assignSpecialInstructions" name="special_instructions"
                                              rows="3" placeholder="Any special instructions for this judge assignment..."></textarea>
                                </div>
                            </div>
                        </div>

                        <div id="judgePreview" class="alert alert-info" style="display: none;">
                            <h6>Assignment Preview:</h6>
                            <div id="previewContent"></div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmAssignment">
                        <i class="fas fa-user-plus"></i> Assign Judge
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

    <script>
    $(document).ready(function() {
        console.log('Test page loaded - jQuery version:', $.fn.jquery);
        console.log('Bootstrap modal available:', typeof $.fn.modal);

        // Judge Assignment functionality
        $('#assign-judge-btn').click(function() {
            console.log('Assign Judge button clicked');

            // Check if jQuery and Bootstrap are loaded
            if (typeof $ === 'undefined') {
                console.error('jQuery is not loaded');
                alert('Error: jQuery is required but not loaded. Please refresh the page.');
                return;
            }

            if (typeof $.fn.modal === 'undefined') {
                console.error('Bootstrap modal is not loaded');
                alert('Error: Bootstrap is required but not loaded. Please refresh the page.');
                return;
            }

            // Check if modal exists
            if ($('#judgeAssignmentModal').length === 0) {
                console.error('Judge assignment modal element not found');
                alert('Error: Modal element not found. Please refresh the page.');
                return;
            }

            console.log('Opening judge assignment modal');
            $('#judgeAssignmentModal').modal('show');
        });

        // Test confirm button
        $('#confirmAssignment').click(function() {
            alert('Test: Assign button clicked - this would submit the form');
        });
    });
    </script>
</body>
</html>